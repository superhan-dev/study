# 왜 클린 아키텍처인가?

클린아키텍처는 전통적인 MVC 패턴이라고 하는 레이어드 아키텍처의 구조에서 발생하는 문제점을 해결하고 보다 유지보수성이 높고 견고한 아키텍처를 설계할 수 있도록 만들어졌다.

또한 명확하게 도메인에 종속된 비즈니스 로직과 유즈케이스를 부수적인 설정들과 외부 로직과 연결되지 않도록 순수성을 지키면서도 새로운 기능을 붙이기 쉬운 방향성으로 프로젝트를 진행할 수 있도록 돕는다.

포트엔 어댑터 패턴을 활용한 헥사고날 아키텍처와 매우 닮아있지만 헥사고날 아키텍처만이 클린아키텍처를 구현할 수 있는 방법은 아니다.

# 계층형 아키텍처의 문제점

계층형 아키텍처는 그 자체로 이미 견고한 아키텍처이지만 코드에 나쁜 습관이 스며들 수 있는 구조라고 표현한다.

## 데이터 베이스 주도설계를 유도한다.

데이터베이스 주도 설계는 비즈니스 로직에 영속성 로직이 침투하도록 허용하며 도메인과 영속성 계층간에 강결합이 생기기 쉬운 구조를 가지고있다. 또한 레이어간에 경계를 넘나드는 접점에서 명확한 규칙이 없기 때문에 나쁜 습관이 들기 쉽다는 의견이 많다.

예를 들어 서비스를 인터페이스로 정의하지 않고 클래스로 바로 정의해서 DI를 함으로써 SOLID 원칙을 쉽게 위베하면서 이를 편의성에 따라 생략했다고 표현할 정도로 강한 결합을 서스름 없이 만들어버리는 상황을 흔하게 볼 수 있다.

이런 의견을 가진 개발자에게 헥사고날 아키텍처와 같은 복잡한 구조는 굳이 사용하지 않아도 될 불필요하고 귀찮은 작업으로 여겨질 확률이 높고 이를 깨드리는 커뮤니케이션 비용이 더 든다.

또한 모두가 고통받는(?) 복잡하면서 정교한 설계를 피하려는 조직일 수록 더욱 클린 아키텍처 도입이 어려울 확률이 높다.

## 테스트가 어려워진다.

컨트롤러에서 바로 영속성 계층으로 DI를 하게될 확률이 높아진다. 만약 모든 계층에서 DTO를 공유하게될시 엔티티와 DTO간에 이런 접근은 너무나 쉬워질 수 밖에 없다.

## 유즈케이스를 숨긴다.

유즈케이스가 비즈니스로직에만 존재하는 것이 아닌 컨트롤러단 또는 레포지토리 단에 존재하게 될 수 있다. 또한 계층형 아키텍처는 너비에 대한 제한이 없기 때문에 하나의 서비스오 온갖 유즈케이스들이 몰려 God service가 형성되는 현상을 쉽게 목격할 수 있다.

### 협업이 힘들어진다.

하나의 서비스가 여러 컨트롤러에 종속되는 경우 하나의 서비스 클래스를 개발할 때 다른 개발자가 해당 클래스를 동시에 작업하기가 어려워진다. 이는 개발 효율을 급격하게 낮추며 많은 개발자가 동시에 투입된다고 할지라도 병목이 생기는 구간이 발생할 수 밖에 없게된다.

# 정리

이와 같은 계층형 아키텍처에서 발생하는 레이어간 범람에 대한 문제를 해결하고자 클린 아키텍처가 고안되었고 의존성 규칙과 의존성 역전 원칙에 따라 코어로직은 건드리지 않고 외부, 내부 어댑터와 연결할 수 있게되어 협업에 유리하고 유연하게 확장할 수 있는 아키텍처를 구성하였다.
