# [Project] 데이터 기반 Smart Routing 시스템 설계 전략

## 1. Smart Routing 핵심 알고리즘 요약

기존의 단순 거리 기반 배정을 넘어, 과거 운영 데이터를 복합적으로 계산하여 최적의 경로를 결정한다.

### 1.1. 가중치 기반 다중 기준 라우팅 (Weighted Multi-Criteria Scoring)

여러 변수를 정량화하여 최적의 셀러를 선정하는 가장 기본적인 의사결정 알고리즘이다.

- 공식:

  - Score=(T transit × w1) + (T prep × w2) + (C freight × w3)

- 주요 변수:

  - T transit: 거점 간 과거 소모 시간 (Zip-to-Zip 데이터)
  - T prep: 셀러의 과거 평균 출고 속도 (Fulfillment 성능)
  - C freight: 예상 운송 비용 (Freight Value)

- 효과: "조금 멀어도 빨리 보내는 셀러"와 "가까운데 늘 늦는 셀러" 중 실제 도착 시간이 가장 짧은 쪽을 데이터로 판별한다.

### 1.2. 확률적 신뢰 구간 알고리즘 (P90 Confidence Routing)

단순 평균값의 함정을 피하고 **'배송의 일관성(Reliability)'**을 확보한다.

- 설명: 특정 경로의 평균 배송 시간이 3일이라도 편차가 크다면(1~10일) 지연 리스크가 높다고 판단하여 제외합니다. 대신 평균은 4일이지만 90% 이상의 주문이 5일 내에 도착하는 **'신뢰도 높은 경로'**를 우선 배정한다.

- 효과: 고객 리뷰 점수를 하락시키는 주원인인 '예측 불가능한 지연'을 사전에 차단한다.

### 1.3. 물성 기반 제약 조건 알고리즘 (Physical-Aware Heuristics)

상품의 물리적 특성(weight, size)에 따라 라우팅 가중치를 동적으로 변경한다.

- 소형 화물: 운송 수단의 선택폭이 넓어 거점 간 소모 시간 비중이 낮음 → 셀러의 출고 속도(T prep)에 높은 가중치 부여.

- 대형 화물: 부피와 무게로 인해 지리적 거리의 영향이 절대적임 → 물리적 거리와 거점 간 성능(T transit)에 최우선 가중치 부여.

- 효과: 상품 카테고리별 특성에 맞는 최적의 운송 경로를 매칭한다.

## 2. 시스템 작동 프로세스 (Workflow)

1. 주문 유입: 고객 위치(customer_zip) 및 상품 정보(product_id) 수신.

2. 후보 필터링: 해당 상품을 판매 중인 셀러 그룹 추출.

3. 데이터 조회:

- 셀러-고객 우편번호 간 거점 소모 시간 매트릭스 연산.
- 셀러의 최근 7일간 실시간 출고 성능 조회.

4. 스코어링: 가중치 알고리즘을 통해 각 후보 셀러별 Routing Score 산출.

5. 주문 배정: 최적 점수를 획득한 셀러에게 주문을 전달하고, 고객에게는 데이터 기반의 정확한 도착 예정 시간(ETA) 제공.

## 3. 기대 효과

본 시스템은 물리적인 인프라 확장 비용(CAPEX) 없이 오직 데이터의 연결과 소프트웨어 로직만으로 시스템 고도화를 달성합니다.

- 배송 리드타임 단축: 과거 데이터의 최적값 매칭을 통해 물리적 이동 및 대기 시간 최소화.

- 고객 경험(CX) 개선: 리뷰 분석을 통해 파악된 불만 요인(예측 불가능한 지연)을 줄여 서비스 신뢰도 및 별점 상승 유도.

- 운영 효율 최적화: 물류비용(freight_value)과 배송 속도 사이의 최적 균형점(Sweet Spot)을 찾아내어 수익성 개선.

# 다음 과정

위 설계가 적합한지 검증작업을 진행하고 한 단계 깊이 들어가본다.
