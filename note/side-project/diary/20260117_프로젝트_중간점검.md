# 프로젝트 중간점검

- 현재 olist OMS 데이터와 Brazil 의 GIS 정보들을 가지고 경로 최적화가 가능한 TMS를 구현하려 한다.

  - 주문 정보와 배송 출발지/도착지 정보들을 가지고 과거 데이터로 배송 경로 추천 및 배송 시간을 어느정도 줄일 수 있는지 기능 고도화를 할 수 있는 프로젝트를 진행하는 중
  - 어려운 점

    - postGis 기능이 Mac m4 칩에서 돌아가지 않는 상황이라 리눅스를 설치해서 데이터 분석과 작업이 필요한 상태라 맥미니에서 ssh로 접근해서 GIS 데이터를 작업해야하는 상황으로 전체 데이터는 리눅스 PC에서 다루는게 나을 것으로 보임

  - 어디까지 와있나?
    - 데이터 플로우는 airflow를 사용해서 구축하고 시뮬레이션을 통해 과거 데이터들이 쌓이는 대시보드를 통해 데이터 흐름을 시각화 해보는 경험을 얻기 위해 프로젝트를 진행하기로 목표르 잡았다.
    - 어떤 데이터를 시뮬레이션 할 것인가?
    - OMS 셀러 랭킹 시스템, 경로 추천 서비스,
    - 배송 경로 자체는 어떻게 다룰 것인가?
      - Open street map GIS 데이터로 경로를 알아낼 수는 있을 것으로 보여지지만 도로 상황에 따라 도로 추천서비스를 만들어야 실질적인 경로 추천이 가능할 것이다.
    - 화면상에서 리플레이를 하는 퍼포먼스를 만들기위해 어떤 툴들을 사용할 것인지 혹은 직접 프론트화면을 구현할지도 설계가 필요하다.

  [] TODO

  - 1차

    - 재고를 초기 셋팅을 해야하는데 재고 셋팅은 어떻게 할 것인가?
    - 테이블 설계
      - 셀러 랭킹 계산 추천 (1차)
      - 배송 지연 알림 (1차)
      - 입고 이벤트 알림 (1차)
    - OMS Airflow로 자동화
      - '주문 생성 -> 셀러 랭킹 조회 -> 경로 스코어 계산'으로 이어지는 최소한의 흐름을 Airflow로 자동화
        - 재고 세팅: 초기 재고는 olist_products_dataset을 기반으로 각 seller_id가 특정 카테고리의 재고를 무한히 가지고 있거나, 난수(Random)로 10~100개 사이의 초기값을 할당한 inventory 테이블을 생성.

  - 2차

    - 테이블 설계
      - 경로 추천 (2차)
    - 리눅스 서버 기반 GIS 샌드박스 구축
      - 리눅스 서버에 Postgresql 및 postgis 를 설치하고 포트포워딩으로 SSH 접근이 가능하도록 한다.
      - 포트포워딩과 보안에 대한 설정을 진행한다.

전체적인 프로젝트는 1차(OMS), 2차(TMS)로 나눠 진행한다.

1차 에서는 OMS에서는 배송 지연 포인트와 재고가 있을 때 배송이 얼마나 줄어들 수 있는지 재고관리 시스템의 효용성을 검증하는 시스템이 될 것이다.
airflow를 사용해서 데이터 replay를 해여 프로그램에 흘려보내고 이를 시각화 해서 타임트래블 UI를 구현한다. 빨리감기로 데이터를 흘려보냈을 때 실시간으로 바뀌는 셀러 랭킹, 배송 지연여부, 입고 이벤트에 대한 범위를 1차로 잡는다.

2차는 경로 추천 중심 기능을 작업한다. 1차에서 작업한 주문 정보가 들어왔을 때 기존 배송 시간과 추천된 경로를 비교하는 화면을 리플레이 기능으로 TMS 개선 사례를 표현한다.
데이터는 openStreetMap의 브라질 도로정보를 거리, 제한속도, 도로 품질 가중치 등을 활용하여 최적의 경로를 찾아낸다. PgRouting을 활용하여 다익스트라 알고리즘 또는 A\*알고리즘 기반의 실제 최단 경로 탐색을 통한 기능을 구현한다.

이후 실시간 교통정보, 기상데이터 고도 등을 활용하여 연비 기반 경로 최적화, 속도기반 경로 최적화, 날씨 기반 경로 최적화 등을 고려하여 기능을 고도화 한다.
