# 1. 지연의 원인을 구조적으로 분해

## 배송 리드타임 단계별 분석

Olist 데이터셋을 활용하여 다음과 같은 분석이 가능합니다.

- `order_purchase_timestamp`
- `order_approved_at`
- `order_delivered_carrier_date`
- `order_delivered_customer_date`

### Lead Time Decomposition

각 단계별 설명은 다음과 같습니다.

1. **결제 → 승인**: 결제 및 시스템 지연
2. **승인 → 택배사 전달**: 판매자 처리 지연
3. **택배사 → 고객**: 물류 및 지역 지연

### 백엔드 포인트

- 주문 단위로 Stage별 Latency를 계산합니다.
- 병목이 발생한 Stage를 자동으로 분류합니다.

### 기대 결과

- "특정 판매자의 출고가 지연되고 있음"을 식별
- "특정 지역의 택배 배송 자체가 지연되고 있음"을 식별

---

# 2. Seller Intelligence 시스템

## 판매자 스코어링

단순 평균 리드타임이 아닌 다각적인 분석을 수행합니다.

- 평균 배송 시간
- 지연 비율 (%)
- 주문량 대비 클레임 비율
- 리뷰 점수 (`review_score`)

### Seller Reliability Score 생성

스코어 계산 로직 예시:
```
score = (w1 * 배송속도) - (w2 * 지연률) + (w3 * 리뷰평점) + (w4 * 주문완료율)
```

### 백엔드 설계 장점

- Batch Job을 통한 정기 계산
- API 제공: `/sellers/{id}/score`
- Redis 등을 활용한 캐싱 전략 수립

### 기대 결과

- 특정 지역에서 신뢰도가 가장 높은 판매자 Top N 추천 가능

---

# 3. 고객 관점 기능 (B2C)

## 예상 도착일 제공 기능

실무에서 중요한 문제인 "상품이 언제 도착하는가"를 해결합니다.

### 주요 기능

- 상품 및 배송지 입력 시 과거 데이터를 기반으로 예상 도착일 범위를 제공
- P50 / P90 ETA 제공

### 기술 포인트

- 단순 평균이 아닌 Percentile 기반의 ETA 산출
- 지역, 판매자, 카테고리 조합을 고려

### 참고

- Amazon 스타일의 ETA 시스템 축소판 구현

---

# 4. 이상 탐지 (Anomaly Detection)

## 배송 지연 이상 탐지

다음과 같은 이상 징후를 탐지합니다.

- 특정 날짜부터 특정 지역의 배송 시간이 급증하는 경우
- 특정 Seller의 성능이 갑작스럽게 저하되는 경우

### 구현 아이디어

- 이동 평균 대비 급증 감지
- Z-score 또는 IQR 기반의 Rule 적용
- (고급) Kafka Stream 및 Window Aggregation 활용

### 백엔드 설계 포인트

- 모니터링 시스템 구축
- 알람 API 및 Slack Webhook 연동 시뮬레이션

---

# 5. 운영자(Admin) 대시보드용 API

## 운영자 주요 지표

- 금일 지연율 Top 5 지역
- 금주 최하위(Worst) Seller
- 지연 원인 비율 (판매자 / 물류 / 시스템)

### 백엔드 설계 포인트

- Aggregation API 구현
- Materialized View 개념 도입
- Read-heavy 트래픽을 고려한 CQRS 구조 설계

---

# 6. 기술 스택 관점의 설계 제안

본 프로젝트를 포트폴리오로 활용하기 위한 아키텍처 제안입니다.

## 아키텍처 구성

### Batch ETL
- CSV 데이터를 정규화하여 Analytics DB로 적재

### API Server
- **Seller Insight API**: 판매자 분석 정보 제공
- **Delivery ETA API**: 배송 예정일 산출
- **Delay Analytics API**: 지연 원인 분석

### Cache
- Redis 활용 (Top Seller, ETA 정보 캐싱)

### Dashboard
- Grafana 연동

---

# 7. 다음 단계

실제 데이터를 활용하여 생성할 데이터의 상세 구조를 정의합니다.